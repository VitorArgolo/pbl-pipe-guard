"use strict";(self.webpackChunkpipe_guard=self.webpackChunkpipe_guard||[]).push([[676],{9676:(T,g,c)=>{c.r(g),c.d(g,{IncidentsModule:()=>x});var a=c(6814),s=c(5692),t=c(5879),u=c(7341);let p=(()=>{class n{constructor(){this.incidents=[],(0,u.E)().then(e=>{this.incidents=e}).catch(e=>{console.error("Erro ao preencher incidentes:",e)})}getAll(){return this.incidents}getOne(e){return this.incidents.find(i=>i.id===e)}static#t=this.\u0275fac=function(i){return new(i||n)};static#n=this.\u0275prov=t.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),f=(()=>{class n{static#t=this.\u0275fac=function(i){return new(i||n)};static#n=this.\u0275prov=t.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var h=c(1368),r=c(5324);function _(n,d){if(1&n&&(t.TgZ(0,"tr")(1,"td"),t._uU(2,"N\xedvel de Gravidade:"),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.qZA()()),2&n){const e=t.oxw();t.xp6(4),t.Oqu(null==e.incident?null:e.incident.severity)}}let m=(()=>{class n{constructor(e,i,o,l){this.incidentsService=e,this.route=i,this.notificacaoService=o,this.progressoService=l,this.quantidade=1}ngOnInit(){const i=Number(this.route.snapshot.paramMap.get("id"));this.incident=this.incidentsService.getOne(i)}adicionarProgresso(){const e={...this.incident,quantidade:this.quantidade};this.progressoService.adicionarProgresso(e)}static#t=this.\u0275fac=function(i){return new(i||n)(t.Y36(p),t.Y36(s.gz),t.Y36(f),t.Y36(h.J))};static#n=this.\u0275cmp=t.Xpm({type:n,selectors:[["app-detalhes-incident"]],decls:30,vars:4,consts:[[1,"container"],[1,"incident-details"],["colspan","2"],[4,"ngIf"],["nbButton","",1,"button",3,"click"],[1,"fas","fa-spinner","fa-spin"]],template:function(i,o){1&i&&(t.TgZ(0,"div",0)(1,"table",1)(2,"thead")(3,"tr")(4,"th",2),t._uU(5,"Detalhes do Incidente"),t.qZA()()(),t.TgZ(6,"tbody")(7,"tr")(8,"td"),t._uU(9,"T\xedtulo:"),t.qZA(),t.TgZ(10,"td"),t._uU(11),t.qZA()(),t.TgZ(12,"tr")(13,"td"),t._uU(14,"Descri\xe7\xe3o:"),t.qZA(),t.TgZ(15,"td"),t._uU(16),t.qZA()(),t.TgZ(17,"tr")(18,"td"),t._uU(19,"Vazamento:"),t.qZA(),t.TgZ(20,"td"),t._uU(21),t.qZA()(),t.YNc(22,_,5,1,"tr",3),t.TgZ(23,"tr")(24,"td"),t._uU(25,"Status de execu\xe7\xe3o: "),t.qZA(),t.TgZ(26,"td")(27,"button",4),t.NdJ("click",function(){return o.adicionarProgresso()}),t._UZ(28,"i",5),t._uU(29," Adicionar em progresso\n"),t.qZA()()()()()()),2&i&&(t.xp6(11),t.Oqu(null==o.incident?null:o.incident.title),t.xp6(5),t.Oqu(null==o.incident?null:o.incident.description),t.xp6(5),t.Oqu(null!=o.incident&&o.incident.leak?"Sim":"N\xe3o"),t.xp6(1),t.Q6J("ngIf",null==o.incident?null:o.incident.leak))},dependencies:[a.O5,r.DPz],styles:[".incident-details[_ngcontent-%COMP%]{border-collapse:collapse;width:100%}.incident-details[_ngcontent-%COMP%]   td[_ngcontent-%COMP%], .incident-details[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{border:1px solid #ddd;padding:8px}.incident-details[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding-top:12px;padding-bottom:12px;text-align:left;background-color:#007bff;color:#fff}.incident-details[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(2n){background-color:#f2f2f2}.incident-details[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background-color:#ddd}.incident-details[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:10px 20px;font-size:16px;background-color:#373737;color:#fff;border:none;border-radius:5px;cursor:pointer;transition:background-color .3s ease}.incident-details[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background-color:#0056b3}.button[_ngcontent-%COMP%]{width:100%}.container[_ngcontent-%COMP%]{min-height:600px}"]})}return n})();function C(n,d){1&n&&(t.TgZ(0,"div",6),t._UZ(1,"div",7),t.qZA())}function b(n,d){if(1&n&&(t.TgZ(0,"tr")(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.qZA(),t.TgZ(5,"td")(6,"button",9),t._UZ(7,"i",10),t._uU(8," Mais detalhes "),t.qZA()()()),2&n){const e=d.$implicit;t.xp6(2),t.Oqu(e.title),t.xp6(2),t.Oqu(e.description),t.xp6(2),t.MGl("routerLink","/incidents/",e.id,"")}}function O(n,d){if(1&n&&(t.ynx(0),t.YNc(1,b,9,3,"tr",8),t.BQk()),2&n){const e=t.oxw();t.xp6(1),t.Q6J("ngForOf",e.incidents)}}function M(n,d){1&n&&t._uU(0,"N\xe3o existem incidentes.")}u.s.then(n=>n);const P=[{path:":id",component:m},{path:"",component:(()=>{class n{constructor(e,i){this.incidentsService=e,this.route=i,this.incidents=[]}ngOnInit(){(0,u.E)().then(e=>{this.incidents=e}).catch(e=>{console.error("Erro ao preencher incidentes:",e)}),this.route.queryParamMap.subscribe(e=>{const i=e.get("title")?.toLowerCase();this.incidents=i?this.incidents.filter(o=>o.title.toLowerCase().includes(i)):this.incidentsService.getAll()})}getHeaderColor(e){switch(e){case"Baixo":return"#3e6b36";case"M\xe9dio":return"#d9a602";case"Alto":return"#ff8c00";case"Cr\xedtico":return"#ff3333";default:return"#1b4f7f"}}getTextColor(e){return"#fff"}getBorderColor(e){return this.getHeaderColor(e)}static#t=this.\u0275fac=function(i){return new(i||n)(t.Y36(p),t.Y36(s.gz))};static#n=this.\u0275cmp=t.Xpm({type:n,selectors:[["app-incidents"]],decls:16,vars:3,consts:[[1,"container"],["class","loading",4,"ngIf"],[1,"widt-min-and-max"],[1,"incident-table"],[4,"ngIf","ngIfElse"],["semIncidents",""],[1,"loading"],[1,"spinner"],[4,"ngFor","ngForOf"],["nbButton","",3,"routerLink"],[1,"fas","fa-arrow-right"]],template:function(i,o){if(1&i&&(t.TgZ(0,"div",0),t.YNc(1,C,2,0,"div",1),t.TgZ(2,"div",2)(3,"table",3)(4,"thead")(5,"tr")(6,"th"),t._uU(7,"T\xedtulo"),t.qZA(),t.TgZ(8,"th"),t._uU(9,"Descri\xe7\xe3o"),t.qZA(),t.TgZ(10,"th"),t._uU(11,"A\xe7\xf5es"),t.qZA()()(),t.TgZ(12,"tbody"),t.YNc(13,O,2,1,"ng-container",4),t.qZA()(),t.YNc(14,M,1,0,"ng-template",null,5,t.W1O),t.qZA()()),2&i){const l=t.MAs(15);t.xp6(1),t.Q6J("ngIf",!o.incidents),t.xp6(12),t.Q6J("ngIf",o.incidents.length>0)("ngIfElse",l)}},dependencies:[a.sg,a.O5,s.rH,r.DPz],styles:[".container[_ngcontent-%COMP%]{min-height:600px}.incident-table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse}.incident-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .incident-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:10px;border-bottom:1px solid #ddd;text-align:left}.incident-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background-color:#f0f0f0;font-weight:700}.incident-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background-color:#f5f5f5}.incident-table[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background-color:#007bff;color:#fff;border:none;border-radius:5px;padding:5px 10px;cursor:pointer;transition:background-color .3s ease}.incident-table[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background-color:#0056b3}.loading[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;height:100vh}.spinner[_ngcontent-%COMP%]{border:4px solid rgba(0,0,0,.1);border-left-color:#333;border-radius:50%;width:40px;height:40px;animation:_ngcontent-%COMP%_spin 1s linear infinite}@keyframes _ngcontent-%COMP%_spin{to{transform:rotate(360deg)}}"]})}return n})()}];let Z=(()=>{class n{static#t=this.\u0275fac=function(i){return new(i||n)};static#n=this.\u0275mod=t.oAB({type:n});static#e=this.\u0275inj=t.cJS({imports:[s.Bz.forChild(P),s.Bz]})}return n})();var v=c(6223);let x=(()=>{class n{static#t=this.\u0275fac=function(i){return new(i||n)};static#n=this.\u0275mod=t.oAB({type:n});static#e=this.\u0275inj=t.cJS({imports:[a.ez,Z,v.u5,r.SDF.forRoot(),r.BW0,r.T2N,r.nKr,r.KdK,r.zyh]})}return n})()}}]);